<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Maximum Reality Pets</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: url('bg_wp.jpg') no-repeat center center fixed;
      background-size: cover;
      color: #fff;
      overflow: hidden;
      position: relative;
      height: 100vh;
    }

    h1 {
      text-align: center;
      text-shadow: 2px 2px 4px #000;
      margin-top: 10px;
    }

    .stats-box {
      position: absolute;
      top: 10px;
      right: 10px;
      background-color: rgba(0,0,0,0.6);
      padding: 10px;
      border-radius: 10px;
      min-width: 140px;
    }

    .pet {
      position: absolute;
      width: 180px;
      height: 180px;
      image-rendering: pixelated;
      transition: transform 0.5s ease;
      cursor: pointer;
      z-index: 3;
    }

    .food {
      position: absolute;
      font-size: 32px;
      animation: floatUp 1s forwards;
      z-index: 4;
    }

    @keyframes floatUp {
      0% { transform: translateY(0); opacity: 1; }
      100% { transform: translateY(-50px); opacity: 0; }
    }

    .controls {
      position: absolute;
      bottom: 10px;
      left: 50%;
      transform: translateX(-50%);
      background-color: rgba(0,0,0,0.5);
      padding: 10px;
      border-radius: 10px;
    }

    .controls input, .controls select, .controls button {
      margin: 5px 2px;
      padding: 5px 8px;
      border-radius: 5px;
      border: none;
      font-size: 14px;
    }

    .controls button {
      background-color: #ffcc00;
      color: #000;
      font-weight: bold;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>üêæ Maximum Reality Pets</h1>

  <div class="stats-box" id="statsBox">
    <div id="statName">Name: ‚Äî</div>
    <div id="statSpecies">Species: ‚Äî</div>
    <div id="statHunger">Hunger: ‚Äî</div>
    <div id="statHappiness">Happiness: ‚Äî</div>
    <div id="statEnergy">Energy: ‚Äî</div>
    <div id="statHealth">Health: ‚Äî</div>
  </div>

  <div class="controls">
    <input id="petName" placeholder="Pet Name">
    <select id="petSpecies">
      <option value="cat">Cat</option>
      <option value="dragon">Dragon</option>
      <option value="frog">Frog</option>
      <option value="bunny">Bunny</option>
      <option value="unicorn">Unicorn</option>
      <option value="fox">Fox</option>
      <option value="dog">Dog</option>
    </select>
    <button onclick="createPet()">Create Pet</button>
    <button onclick="feedPet()">Feed</button>
  </div>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>

  <script>
    // ===== Firebase config =====
    const firebaseConfig = {
      apiKey: "AIzaSyDkpW7RAmX0wPmL757_GzEFIoU6snssLnA",
      authDomain: "pets-86c25.firebaseapp.com",
      projectId: "pets-86c25",
      storageBucket: "pets-86c25.firebasestorage.app",
      messagingSenderId: "556129222317",
      appId: "1:556129222317:web:12d323a5165eb222d59024"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    const speciesSprites = {
      bunny: "bunny.png",
      frog: "frog.png",
      fox: "fox.png",
      cat: "cat.png",
      dragon: "dragon.png",
      unicorn: "unicorn.png",
      dog: "dog.png"
    };

    const foodIcons = {
      bunny: "ü•ï",
      frog: "ü™∞",
      fox: "üçî",
      cat: "üê†",
      dragon: "üçñ",
      unicorn: "üçé",
      dog: "ü•©"
    };

    const petPositions = {
      frog: { left: "50px", top: "calc(100% - 150px)" },
      dog: { left: "60%", top: "calc(100% - 120px)" },
      bunny: { left: "80%", top: "calc(100% - 130px)" },
      dragon: { left: "45%", top: "50px" },
      cat: { left: "50%", top: "60%" },
      fox: { left: "70%", top: "55%" },
      unicorn: { left: "40%", top: "60%" }
    };

    let currentPet = null;
    let pets = [];

    // Fetch pets
    async function fetchPets() {
      const snapshot = await db.collection("pets").get();
      pets = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      if (pets.length > 0) displayPet(pets[0]); // only one at a time
    }

    function displayPet(pet) {
      currentPet = pet;

      // Remove old image if exists
      const old = document.querySelector(".pet");
      if (old) old.remove();

      // Create pet image
      const img = document.createElement("img");
      img.src = pet.sprite;
      img.className = "pet";
      img.style.left = petPositions[pet.species].left;
      img.style.top = petPositions[pet.species].top;
      document.body.appendChild(img);

      updateStats();
    }

    function updateStats() {
      if (!currentPet) return;
      document.getElementById("statName").innerText = `Name: ${currentPet.name}`;
      document.getElementById("statSpecies").innerText = `Species: ${currentPet.species}`;
      document.getElementById("statHunger").innerText = `Hunger: ${Math.round(currentPet.stats.hunger)}`;
      document.getElementById("statHappiness").innerText = `Happiness: ${Math.round(currentPet.stats.happiness)}`;
      document.getElementById("statEnergy").innerText = `Energy: ${Math.round(currentPet.stats.energy)}`;
      document.getElementById("statHealth").innerText = `Health: ${Math.round(currentPet.stats.health)}`;
    }

    async function createPet() {
      const name = document.getElementById("petName").value;
      const species = document.getElementById("petSpecies").value;
      if (!name || !species) return;

      const pet = {
        name,
        species,
        sprite: speciesSprites[species],
        stats: { hunger: 50, happiness: 50, energy: 50, health: 100 },
        lastUpdated: Date.now()
      };

      const ref = await db.collection("pets").add(pet);
      pets.push({ id: ref.id, ...pet });
      displayPet(pet);

      document.getElementById("petName").value = "";
    }

    async function feedPet() {
      if (!currentPet) return;
      const stats = { ...currentPet.stats };
      stats.hunger = Math.max(0, stats.hunger - 20);
      stats.happiness = Math.min(100, stats.happiness + 5);

      await db.collection("pets").doc(currentPet.id).update({
        stats,
        lastUpdated: Date.now()
      });

      currentPet.stats = stats;
      updateStats();

      // Animate food
      const food = document.createElement("div");
      food.className = "food";
      food.style.left = petPositions[currentPet.species].left;
      food.style.top = petPositions[currentPet.species].top;
      food.innerText = foodIcons[currentPet.species];
      document.body.appendChild(food);

      setTimeout(() => food.remove(), 1000);
    }

    fetchPets();
  </script>
</body>
</html>
